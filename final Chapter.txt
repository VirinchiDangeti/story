This is the final flow for understanding. redoing to get clear idea